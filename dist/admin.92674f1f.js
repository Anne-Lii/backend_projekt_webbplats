const e="https://backend-projekt-api-2zmb.onrender.com/api/foods",t="https://backend-projekt-api-2zmb.onrender.com/api/drinks",n="https://backend-projekt-api-2zmb.onrender.com/api/bookings";let o=null,d=!1,l=null;const a=document.getElementById("bookingsection"),r=document.getElementById("foodSection"),i=document.getElementById("drinkSection"),c=document.getElementById("registrationSection"),s=document.getElementById("updateModal"),m=document.getElementById("updateBookingModal"),u=document.getElementById("addFoodModal"),y=document.getElementById("addDrinkModal");document.getElementById("bookingForm"),document.addEventListener("DOMContentLoaded",()=>{async function g(t){try{let n=(await f(e)).filter(e=>e.category.toLowerCase()===t.toLowerCase());k(n,p(t))}catch(e){console.error("Error fetching food items:",e)}}function p(e){switch(e.toLowerCase()){case"smårätter":return"smallDishesTable";case"varmrätt":return"mainCoursesTable";case"dessert":return"dessertTable";case"white":return"whiteTable";case"red":return"redTable";case"rose":return"roseTable";case"champagne":return"champagneTable";case"drink":return"drinkTable";case"beer":return"beerTable";case"alcoholfree":return"alcoholfreeTable";default:return""}}async function E(e){try{let n=(await f(t)).filter(t=>t.category.toLowerCase()===e.toLowerCase());k(n,p(e))}catch(e){console.error("Error fetching drink items:",e)}}async function f(e,t){try{let n=await fetch(e);if(console.log(`Response status for ${e}:`,n.status),!n.ok)throw Error(`Failed to fetch ${t} items`);return n.json()}catch(e){throw e}}function k(n,l){let a=document.getElementById(l);if(!a){console.error(`Table with id '${l}' not found.`);return}let r=a.getElementsByTagName("tbody")[0];r.innerHTML="",n.forEach(n=>{let l=r.insertRow(),a=l.insertCell(0),i=l.insertCell(1),c=l.insertCell(2),m=l.insertCell(3),u=l.insertCell(4),y=l.insertCell(5);a.textContent=n.category,i.textContent=n.food||n.drinkname,c.textContent=n.description,m.textContent=n.price;let p=document.createElement("button");p.className="btn btn-edit",p.onclick=()=>{d=!1,o=n,document.getElementById("name").value=n?n.food||n.drinkname:"",document.getElementById("description").value=n?n.description:"",document.getElementById("price").value=n?n.price:"",document.getElementById("category").value=n?n.category.toLowerCase():"",document.getElementById("submitBtn").addEventListener("click",function(){d=!1}),s.style.display="block"},u.appendChild(p);let f=document.createElement("button");f.setAttribute("data-id",n._id),f.className="btn btn-delete",f.onclick=()=>(function(n,o,d){let l="food"===d?e:t;fetch(`${l}/${n}`,{method:"DELETE"}).then(e=>{if(!e.ok)throw Error("Failed to delete item");return e.json()}).then(e=>{console.log("Deleted item:",e),"food"===d?g(o):E(o)}).catch(e=>{console.error("Error deleting item:",e)})})(f.getAttribute("data-id"),n.category,n.food?"food":"drink"),y.appendChild(f)}),a.style.display="table"}document.getElementById("link_edit_food").addEventListener("click",function(e){e.preventDefault(),g("smårätter"),g("varmrätt"),g("dessert"),r.style.display="block",a.style.display="none",i.style.display="none",c.style.display="none"}),document.getElementById("link_edit_drinks").addEventListener("click",function(e){e.preventDefault(),E("white"),E("red"),E("rose"),E("champagne"),E("drink"),E("beer"),E("alcoholfree"),a.style.display="none",r.style.display="none",i.style.display="block",c.style.display="none"});let b=document.getElementsByClassName("close");for(let e=0;e<b.length;e++)b[e].onclick=function(){s.style.display="none",u.style.display="none",y.style.display="none",m.style.display="none"};window.onclick=function(e){e.target==s?s.style.display="none":e.target==u?u.style.display="none":e.target==y?y.style.display="none":e.target==m&&(y.style.display="none")},document.getElementById("addFoodButton").addEventListener("click",()=>{var e;d=!0,o=e={category:"",food:"",description:"",price:""},document.getElementById("foodname").value=e?e.food:"",document.getElementById("fooddescription").value=e?e.description:"",document.getElementById("foodprice").value=e?e.price:"",document.getElementById("foodcategory").value=e?e.category:"",document.getElementById("addFoodSubmitBtn").addEventListener("click",async function(){d=!0,u.style.display="none"}),u.style.display="block"}),document.getElementById("addDrinkButton").addEventListener("click",()=>{var e;d=!0,o=e={category:"",drinkname:"",description:"",price:""},document.getElementById("drinkname").value=e?e.drinkname:"",document.getElementById("drinkdescription").value=e?e.description:"",document.getElementById("drinkprice").value=e?e.price:"",document.getElementById("drinkcategory").value=e?e.category:"",document.getElementById("addDrinkSubmitBtn").addEventListener("click",function(){d=!0,y.style.display="none"}),y.style.display="block"}),document.getElementById("foodForm").addEventListener("submit",async function(t){t.preventDefault();let n=document.getElementById("foodname").value,o=document.getElementById("fooddescription").value,d=document.getElementById("foodprice").value;if(n&&o&&d)u.querySelector(".modalFieldMessage").style.display="none";else{let e=u.querySelector(".modalFieldMessage");e.textContent="Alla fält måste fyllas i",e.style.display="block",u.style.display="block";return}let l={category:document.getElementById("foodcategory").value,food:document.getElementById("foodname").value.toUpperCase(),description:document.getElementById("fooddescription").value,price:document.getElementById("foodprice").value};try{let t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),n=await t.json();console.log("New food item added:",n)}catch(e){console.error("Error adding new food item:",e)}g(document.getElementById("foodcategory").value.toLowerCase())}),document.getElementById("drinkForm").addEventListener("submit",async function(e){e.preventDefault();let n=document.getElementById("drinkname").value,o=document.getElementById("drinkdescription").value,d=document.getElementById("drinkprice").value;if(n&&o&&d)y.querySelector(".modalFieldMessage").style.display="none";else{let e=y.querySelector(".modalFieldMessage");e.textContent="Alla fält måste fyllas i",e.style.display="block",y.style.display="block";return}let l={category:document.getElementById("drinkcategory").value,drinkname:document.getElementById("drinkname").value.toUpperCase(),description:document.getElementById("drinkdescription").value,price:document.getElementById("drinkprice").value};try{let e=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),n=await e.json();console.log("New drink item added:",n)}catch(e){console.error("Error adding new drink item:",e)}E(document.getElementById("drinkcategory").value.toLowerCase())}),document.getElementById("updateForm").addEventListener("submit",async function(n){n.preventDefault();let l=document.getElementById("name").value,a=document.getElementById("description").value,r=document.getElementById("price").value;if(l&&a&&r)document.querySelector(".modalFieldMessage").style.display="none";else{let e=document.querySelector(".modalFieldMessage");e.textContent="Alla fält måste fyllas i",e.style.display="block",s.style.display="block";return}let i={food:o.food?document.getElementById("name").value.toUpperCase():void 0,drinkname:o.drinkname?document.getElementById("name").value.toUpperCase():void 0,description:document.getElementById("description").value,price:document.getElementById("price").value,category:document.getElementById("category").value},c=o.food?e:t;try{let e=await fetch(`${c}/${o._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!e.ok)throw Error(d?"Failed to add new item":"Failed to update item");let t=await e.json();console.log(t),o.food||i.food?g(o.category):E(o.category),s.style.display="none"}catch(e){console.error("Error updating or adding item:",e)}});let B=document.getElementById("bookingList");async function v(){try{var e;let t=await fetch(n);if(!t.ok)throw Error("Network response was not ok");(e=await t.json()).sort((e,t)=>new Date(e.date)-new Date(t.date)),B.innerHTML="",e.forEach(e=>{let t=document.createElement("li");t.innerHTML=`
                <strong>Bokning:</strong> ${e.name} <br>
                <strong>Datum:</strong> ${new Date(e.date).toLocaleDateString()} <br>
                <strong>Tid:</strong> ${e.time} <br>
                <strong>Antal personer:</strong> ${e.guests} <br>
                <strong>Epost:</strong> ${e.email} <br>
                <strong>Telefonnummer:</strong> ${e.phone} <br>
                <strong>Skapad:</strong> ${new Date(e.created).toLocaleDateString()} <br>
            `;let n=document.createElement("button");n.textContent="Redigera",n.addEventListener("click",()=>{l=e,function(e){let t=new Date(e.date).toISOString().split("T")[0];document.getElementById("bookingname").value=e.name,document.getElementById("bookingemail").value=e.email,document.getElementById("bookingphone").value=e.phone,document.getElementById("bookingdate").value=t,document.getElementById("bookingtime").value=e.time,document.getElementById("bookingguests").value=e.guests,m.style.display="block"}(e)});let o=document.createElement("button");o.textContent="Ta bort",o.addEventListener("click",()=>{I(e._id)}),t.appendChild(n),t.appendChild(o),B.appendChild(t)})}catch(e){console.error("Error fetching bookings: ",e)}}async function I(e){try{if(!(await fetch(`${n}/${e}`,{method:"DELETE"})).ok)throw Error("Network response was not ok");v()}catch(e){console.error("Error deleting booking:",e)}}document.getElementById("link_edit_bookings").addEventListener("click",function(e){e.preventDefault(),a.style.display="block",r.style.display="none",i.style.display="none",v()}),document.getElementById("updateBookingForm").addEventListener("submit",async function(e){e.preventDefault(),console.log(" klickat på uppdatera");let t=document.getElementById("bookingname").value,o=document.getElementById("bookingemail").value,d=document.getElementById("bookingphone").value,a=document.getElementById("bookingdate").value,r=document.getElementById("bookingtime").value,i=document.getElementById("bookingguests").value;if(t&&o&&d&&a&&r&&i)document.querySelector(".modalFieldMessage").style.display="none";else{let e=document.querySelector(".modalFieldMessage");e.textContent="Alla fält måste fyllas i",e.style.display="block",m.style.display="block";return}let c={name:t,email:o,phone:d,date:a,time:r,guests:i};console.log(c);try{let e=await fetch(`${n}/${l._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!e.ok)throw Error("Failed to update booking");await e.json(),v(),m.style.display="none"}catch(e){console.error("Error updating or adding item:",e)}}),window.addEventListener("click",e=>{e.target===m&&(m.style.display="none")})});
//# sourceMappingURL=admin.92674f1f.js.map
